{"version":3,"sources":["assets\\Script\\GamePopStar.js"],"names":["CardSprite","require","GameConfig","GameData","AnimLayerTool","GameTools","GameUiTools","TAG_card","GamePopStar","cc","Class","Node","properties","firstX","firstY","endX","endY","selectNumber","selectAmount","score","cardArr","firstClickNum","Array","ctor","x","DEVICE_WIDTH","y","DEVICE_HEIGHT","setContentSize","init","i","CAED_LINES","initUI","on","EventType","TOUCH_START","onTouchBegan","createCardSprite","isHaveGameData","score0","j","number","scoreCard0","CardShow","scoreCard2","setVisible","moveButtonAnim","MoveButtonAnimType","up","score1","scoreNum","scoreCard3","scoreCard1","event","touchPoint","touch","getLocation","self","getCurrentTarget","propsMenu","PropsMenu","PropsMenuSpace","GamePopStarProperty","isVisible","getBoundingBoxToWorld","contains","playSimpleAudioEngine","CardClickShow","inspectionSelect","cardVanish","console","log","PropsMenuDestroyCard","cardVanishAni","setGamePropNumber","GameScene","PropsMenuExchangeCard","Math","abs","cancelSelect","createMoveAnim","num","getNumber","setNumber","PropsMenuRemoveAcross","z","callFuncPopStarAnim","dt","doDown","doLeft","doCheck","getIsSelect","firstCardI","firstCardJ","deTime","getIsFirstSelect","createPopStarAnim","createScoreMoveAnim","createShowMessageBoxAward","getParent","setGameRewards","scheduleOnce","isdo","y1","x1","card","randomCreateCardNumber","CARD_WIDTH","addChild","random","returnNum","pow","floor","autoCreateCardNumber","setGamePassNum","getGamePassNum","setPassNum","progressBar","scaleX","setScore","saveMemoryInformation","isGameOver","isPassGame","getGamePassScore","gameOver","gamePass","loadingLayer","IS_GAME_OVER","backGame","toastMessage","bestNum","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var CardSprite = require(\"CardSprite\");\nvar GameConfig = require(\"GameConfig\");\nvar GameData = require(\"GameData\");\nvar AnimLayerTool = require(\"AnimLayerTool\");\nvar GameTools = require(\"GameTools\");\nvar GameUiTools = require(\"GameUiTools\");\nconst TAG_card = 1006;\nvar GamePopStar = cc.Class({\n    extends: cc.Node,\n    properties: {\n        firstX: null,//点击元素\n        firstY: null,//点击元素\n        endX: null,\n        endY: null,\n        selectNumber: 0,//选中数字\n        selectAmount: 0,//选中卡片数\n        score: 0,//分数,\n        cardArr: null,// 储存卡片类\n        firstClickNum: new Array(),//记录交换位置\n    },\n    ctor: function () {\n        this.x = -GameConfig.DEVICE_WIDTH / 2;\n        this.y = -GameConfig.DEVICE_HEIGHT / 2;\n        this.setContentSize(GameConfig.DEVICE_WIDTH * 4, GameConfig.DEVICE_HEIGHT * 4);\n        this.init();\n    },\n    init: function () {\n        this.cardArr = new Array();\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            this.cardArr[i] = Array();\n        }\n        this.firstClickNum[0] = -1;\n        this.firstClickNum[1] = -1;\n        this.initUI();\n    },\n    initUI() {\n        //设置触摸事件监听\n        this.on(cc.Node.EventType.TOUCH_START, this.onTouchBegan, this);\n\n        this.createCardSprite(); //创建4X4卡片\n        if (GameData.isHaveGameData()) {\n            this.score = GameData.score0;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    this.cardArr[i][j].number = GameData.scoreCard0[i][j];\n                    this.cardArr[i][j].CardShow();\n                    if (GameData.scoreCard2[i][j] == 1) {\n                        this.cardArr[i][j].setVisible(false);\n                    }\n                }\n            }\n        } else {\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    AnimLayerTool.moveButtonAnim(this.cardArr[i][j], true, AnimLayerTool.MoveButtonAnimType.up);\n                }\n            }\n            GameData.score0 = 0;\n            GameData.score1 = 0;\n            GameData.scoreNum = 0;\n            this.score = 0;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    GameData.scoreCard3[i][j] = 0;\n                    GameData.scoreCard2[i][j] = 0;\n                    GameData.scoreCard1[i][j] = this.cardArr[i][j].number;\n                    GameData.scoreCard0[i][j] = this.cardArr[i][j].number;\n                }\n            }\n        }\n    },\n    onTouchBegan(event) {\n        //获取触摸的X轴和Y轴\n        let touchPoint = event.touch.getLocation(); //获取OpenGL坐标（即cocos2d-x坐标，原点在左下角）\n        let self = event.getCurrentTarget();\n        if (GameConfig.propsMenu != GameConfig.PropsMenu.PropsMenuSpace) {\n            self.GamePopStarProperty(touchPoint);\n            return false;\n        } else { //碰撞检测\n            if (self.selectAmount == 0) {\n                for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                    for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                        if (self.cardArr[i][j].isVisible() && self.cardArr[i][j].getBoundingBoxToWorld().contains(touchPoint)) {\n                            GameTools.playSimpleAudioEngine(1);\n                            self.cardArr[i][j].CardClickShow(1);\n                            self.inspectionSelect(i, j);\n                        }\n                    }\n                }\n                self.cardVanish();\n            }\n            return true;\n        }\n    },\n\n//道具模式\n    GamePopStarProperty(touchPoint) {\n\t\tconsole.log(\"touchPoint :\" + touchPoint);\n        //碰撞检测\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                if (this.cardArr[i][j].isVisible() && this.cardArr[i][j].getBoundingBoxToWorld().contains(touchPoint)) {\n                    GameTools.playSimpleAudioEngine(0);\n                    if (GameConfig.propsMenu == GameConfig.PropsMenu.PropsMenuDestroyCard) {\n                        this.cardArr[i][j].setVisible(false);\n                        this.cardVanishAni(0);\n                        GameData.setGamePropNumber(0, -1);\n                        GameConfig.GameScene.setGamePropNumber(0);\n                        GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n                        return;\n                    } else if (GameConfig.propsMenu == GameConfig.PropsMenu.PropsMenuExchangeCard) {\n                        if (this.firstClickNum[0] == -1) {\n                            this.firstClickNum[0] = i;\n                            this.firstClickNum[1] = j;\n                            if (i > 0 && this.cardArr[i - 1][j].isVisible()) {\n                                this.cardArr[i - 1][j].CardClickShow(1);\n                            }\n                            if (i < GameConfig.CAED_LINES - 1 && this.cardArr[i + 1][j].isVisible()) {\n                                this.cardArr[i + 1][j].CardClickShow(1);\n                            }\n                            if (j > 0 && this.cardArr[i][j - 1].isVisible()) {\n                                this.cardArr[i][j - 1].CardClickShow(1);\n                            }\n                            if (j < GameConfig.CAED_LINES - 1 && this.cardArr[i][j + 1].isVisible()) {\n                                this.cardArr[i][j + 1].CardClickShow(1);\n                            }\n                            //AnimLayerTool.createExchangeCardAnim(this.cardArr[i][j], i, j);\n                        } else {\n                            if (((Math.abs(i - this.firstClickNum[0]) == 1) && ((j - this.firstClickNum[1]) == 0))\n                                || (((i - this.firstClickNum[0]) == 0) && (Math.abs(j - this.firstClickNum[1]) == 1))) {\n                                this.cancelSelect();\n                                AnimLayerTool.createMoveAnim(this.cardArr[i][j], this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]], true);\n                                AnimLayerTool.createMoveAnim(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]], this.cardArr[i][j], true);\n                                let num = this.cardArr[i][j].getNumber();\n                                this.cardArr[i][j].setNumber(\n                                    this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].getNumber());\n                                this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].setNumber(\n                                    num);\n                                this.firstClickNum[0] = -1;\n                                this.firstClickNum[1] = -1;\n                                GameData.setGamePropNumber(2, -1);\n                                GameConfig.GameScene.setGamePropNumber(2);\n                                this.cardVanishAni(0); //检测\n                            }\n                            else {\n                                this.firstClickNum[0] = -1;\n                                this.firstClickNum[1] = -1;\n                                this.cancelSelect();\n                            }\n                            GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n                        }\n                        return;\n                    } else if (GameConfig.propsMenu == GameConfig.PropsMenu.PropsMenuRemoveAcross) {\n                        for (let z = 0; z < GameConfig.CAED_LINES; z++) {\n                            AnimLayerTool.callFuncPopStarAnim(null, this.cardArr[z][j]);\n                            this.cardArr[z][j].setVisible(false);\n                            AnimLayerTool.callFuncPopStarAnim(null, this.cardArr[i][z]);\n                            this.cardArr[i][z].setVisible(false);\n                        }\n                        GameData.setGamePropNumber(1, -1);\n                        GameConfig.GameScene.setGamePropNumber(1);\n                        this.cardVanishAni(0);\n                        GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n                        return;\n                    }\n                }\n            }\n        }\n        if (this.firstClickNum[0] != -1) {\n            this.cancelSelect();\n            this.firstClickNum[0] = -1;\n            this.firstClickNum[1] = -1;\n        }\n        GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n    },\n\n    cardVanishAni(dt) {//卡片消失监听动画\n        this.doDown();\n        this.doLeft();\n        this.doCheck(0);\n        this.selectAmount = 0;\n    },\n\n    cancelSelect() {//取消选择\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                if (this.cardArr[i][j].getIsSelect()) {\n                    this.cardArr[i][j].CardClickShow(0);\n                }\n            }\n        }\n        this.selectAmount = 0;\n    },\n\n    cardVanish() {//卡片消失\n        if (this.selectAmount >= 2) {\n            let firstCardI, firstCardJ;\n            let deTime = 0;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    if (this.cardArr[i][j].getIsFirstSelect()) {\n                        firstCardI = i;\n                        firstCardJ = j;\n                    }\n                    if (this.cardArr[i][j].getIsSelect()) {\n                        this.cardArr[i][j].CardClickShow(0);\n                        //this.cardArr[i][j].setVisible(false);\n                        AnimLayerTool.createPopStarAnim(this.cardArr[i][j], (deTime++) * 0.1);\n                        //AnimLayerTool.callFuncPopStarAnim(this.cardArr[i][j]);\n                    }\n                }\n            }\n\n            this.score = this.score + this.selectAmount * this.selectAmount * 5;\n            AnimLayerTool.createScoreMoveAnim(this.cardArr[firstCardI][firstCardJ], this.selectAmount * this.selectAmount * 5, false);//加分动画\n            AnimLayerTool.createShowMessageBoxAward(this.getParent(), this.selectAmount);//展示奖励对话框\n\n            let scoreNum = GameData.setGameRewards(this.selectNumber); //获取奖励\n            AnimLayerTool.createScoreMoveAnim(this.cardArr[firstCardI][firstCardJ], scoreNum, true);\n            GameUiTools.scheduleOnce(this, this.cardVanishAni, deTime * 0.1);\n            //this.cardVanishAni(0);\n        }\n        else {\n            this.cancelSelect();\n        }\n        return false;\n    },\n//选择点中卡片\n    inspectionSelect(i, j) {\n        this.cardArr[i][j].CardClickShow(2);\n        this.selectAmount++;\n        this.selectNumber = this.cardArr[i][j].getNumber();\n        if (i >= 1 && this.cardArr[i - 1][j].isVisible() && !this.cardArr[i - 1][j].getIsSelect()) {\n            if (this.selectNumber == this.cardArr[i - 1][j].getNumber()) {\n                this.inspectionSelect(i - 1, j);\n            }\n        }\n        if (j < GameConfig.CAED_LINES - 1 && this.cardArr[i][j + 1].isVisible()\n            && !this.cardArr[i][j + 1].getIsSelect()) {\n            if (this.selectNumber == this.cardArr[i][j + 1].getNumber()) {\n                this.inspectionSelect(i, j + 1);\n            }\n        }\n        if (i < GameConfig.CAED_LINES - 1 && this.cardArr[i + 1][j].isVisible()\n            && !this.cardArr[i + 1][j].getIsSelect()) {\n            if (this.selectNumber == this.cardArr[i + 1][j].getNumber()) {\n                this.inspectionSelect(i + 1, j);\n            }\n        }\n        if (j >= 1 && this.cardArr[i][j - 1].isVisible()\n            && !this.cardArr[i][j - 1].getIsSelect()) {\n            if (this.selectNumber == this.cardArr[i][j - 1].getNumber()) {\n                this.inspectionSelect(i, j - 1);\n            }\n        }\n    },\n    doDown() {\n        let isdo = false;\n        for (let x = 0; x < GameConfig.CAED_LINES; x++) {\n            for (let y = 0; y < GameConfig.CAED_LINES; y++) {\n                for (let y1 = y + 1; y1 < GameConfig.CAED_LINES; y1++) {\n                    if (this.cardArr[x][y1].isVisible()) {\n                        if (!this.cardArr[x][y].isVisible()) {\n                            AnimLayerTool.createMoveAnim(this.cardArr[x][y1], this.cardArr[x][y], false);\n                            this.cardArr[x][y].setNumber(this.cardArr[x][y1].getNumber());\n                            this.cardArr[x][y].setVisible(true);\n                            this.cardArr[x][y1].setVisible(false);\n                            this.cardArr[x][y1].CardShow();\n                            y--;\n                            isdo = true;\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n        return isdo;\n    },\n    doLeft() {\n        let isdo = false;\n        for (let x = 0; x < GameConfig.CAED_LINES; x++) {\n            for (let x1 = x + 1; x1 < GameConfig.CAED_LINES; x1++) {\n                if (this.cardArr[x1][0].isVisible()) {\n                    if (!this.cardArr[x][0].isVisible()) {\n                        for (let y = 0; y < GameConfig.CAED_LINES; y++) {\n                            if (this.cardArr[x1][y].isVisible()) {\n                                AnimLayerTool.createMoveAnim(this.cardArr[x1][y], this.cardArr[x][y], false);\n                            }\n                            this.cardArr[x][y].setNumber(this.cardArr[x1][y].getNumber());\n                            this.cardArr[x][y].setVisible(this.cardArr[x1][y].isVisible());\n                            this.cardArr[x1][y].setVisible(false);\n                            this.cardArr[x1][y].CardShow();\n                        }\n                        x--;\n                        isdo = true;\n                    }\n                    break;\n                }\n            }\n        }\n        return isdo;\n    },\n    //根据屏幕大小创建卡片\n    createCardSprite() {\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                let card = CardSprite.createCardSprite(this.randomCreateCardNumber(),\n                    GameConfig.CARD_WIDTH * i + GameConfig.DEVICE_WIDTH / 20.0 + GameConfig.CARD_WIDTH / 2.0,\n                    GameConfig.CARD_WIDTH * j + GameConfig.DEVICE_HEIGHT / 8.0);\n                this.cardArr[i][j] = card;\n                // this.addChild(card, i, j);\n                //版本调整\n                this.addChild(card);\n            }\n        }\n    },\n    //随机产生数字\n    randomCreateCardNumber() {\n        // let num = cc.random0To1() * 5;\n        let num = Math.random() * 5;\n        let returnNum = Math.pow(2, (Math.floor(num) + 1));\n        return returnNum;\n    },\n    //自动生成卡片\n    autoCreateCardNumber(dt) {\n        // this.removeChildByTag(TAG_passSprit);\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                this.cardArr[i][j].setVisible(true);\n                this.cardArr[i][j].setNumber(this.randomCreateCardNumber());\n                this.cardArr[i][j].CardShow();\n                AnimLayerTool.moveButtonAnim(this.cardArr[i][j], true, AnimLayerTool.MoveButtonAnimType.up);\n            }\n        }\n        GameData.setGamePassNum(GameData.getGamePassNum() + 1);\n        GameConfig.GameScene.setPassNum();\n        GameConfig.GameScene.progressBar.scaleX = 0;\n        GameUiTools.scheduleOnce(this, this.doCheck, 0.15);\n    },\n    setScore() {\n        GameConfig.GameScene.setScore(this.score);\n    },\n    doCheck(dt) {\n        this.saveMemoryInformation(); //保存临时信息\n        //this.setScore(score);\n        let isGameOver = true;\n        let isPassGame = true;\n        for (let y = 0; y < GameConfig.CAED_LINES; y++) {\n            for (let x = 0; x < GameConfig.CAED_LINES; x++) {\n                if (this.cardArr[x][y].isVisible()) {\n                    if (x < GameConfig.CAED_LINES - 1 && this.cardArr[x + 1][y].isVisible()\n                        && (this.cardArr[x + 1][y].getNumber() == this.cardArr[x][y].getNumber())) {\n                        isPassGame = false;\n                        break;\n                    }\n                    if (y < GameConfig.CAED_LINES - 1 && this.cardArr[x][y + 1].isVisible()\n                        && (this.cardArr[x][y + 1].getNumber() == this.cardArr[x][y].getNumber())) {\n                        isPassGame = false;\n                        break;\n                    }\n                } else {\n                    isGameOver = false;\n                }\n            }\n        }\n        if (isPassGame) {\n            let deTime = 0;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    if (this.cardArr[i][j].isVisible()) {\n                        if (deTime < 5) {\n                            AnimLayerTool.createPopStarAnim(this.cardArr[i][j], (++deTime) * 0.5);\n                        }\n                        else {\n                            AnimLayerTool.createPopStarAnim(this.cardArr[i][j], deTime * 0.5);\n                        }\n\n                    }\n                }\n            }\n            if (deTime < 5) {\n                this.score = this.score + (5 - deTime) * (5 - deTime) * 5;\n                AnimLayerTool.createScoreMoveAnim(this.cardArr[2][2], (5 - deTime) * (5 - deTime) * 5, false);//加分动画\n            }\n            if (this.score < GameData.getGamePassScore()) {\n                GameUiTools.scheduleOnce(this, this.gameOver, 1 + deTime * 0.5);\n            } else {\n                AnimLayerTool.createShowMessageBoxAward(this.getParent(), -1);\n                // GameUiTools.scheduleOnce(this, this.autoCreateCardNumber, 1 + deTime * 0.5);\n                GameUiTools.scheduleOnce(this, this.gamePass, 1 + deTime * 0.5);\n            }\n        }\n    },\n\n    gamePass() {\n        GameUiTools.loadingLayer(\"panel/GamePass\");\n    },\n\n    gameOver(dt)//游戏结束\n    {\n        GameConfig.IS_GAME_OVER = true;\n        GameUiTools.loadingLayer(\"panel/GameOver\");\n        // cc.loader.loadRes(\"panel/GameOver\", (err, prefab) => {\n        //     let node = cc.instantiate(prefab);\n        //     GameConfig.GameScene.node.addChild(node);\n        // });\n    },\n\n    /**\n     *撤销游戏\n     */\n    backGame() {\n        if (GameData.scoreNum == 1) {\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    this.cardArr[i][j].setNumber(GameData.scoreCard1[i][j]);\n                    this.cardArr[i][j].CardShow();\n                    if (GameData.scoreCard3[i][j] == 1) {\n                        this.cardArr[i][j].setVisible(false);\n                    } else {\n                        this.cardArr[i][j].setVisible(true);\n                    }\n                }\n            }\n            this.score = GameData.score1;\n            GameData.scoreNum = 0;\n            GameData.score0 = GameData.score1;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    GameData.scoreCard2[i][j] = GameData.scoreCard3[i][j];\n                    GameData.scoreCard0[i][j] = GameData.scoreCard1[i][j];\n                }\n            }\n            this.setScore();\n        } else {\n            GameTools.toastMessage(4);\n        }\n    },\n\n    saveMemoryInformation() {\n        if (GameData.scoreNum == 0) {\n            GameData.scoreNum = 1;\n        }\n        GameData.score1 = GameData.score0;\n        GameData.score0 = this.score;\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                GameData.scoreCard3[i][j] = GameData.scoreCard2[i][j];\n                GameData.scoreCard2[i][j] = (this.cardArr[i][j].isVisible() ? 0 : 1);\n                GameData.scoreCard1[i][j] = GameData.scoreCard0[i][j];\n                GameData.scoreCard0[i][j] = this.cardArr[i][j].getNumber();\n                GameData.bestNum = GameData.bestNum > this.cardArr[i][j].getNumber() ? GameData.bestNum : this.cardArr[i][j].getNumber();\n            }\n        }\n    }\n});\n\nmodule.exports = GamePopStar;\n"]}