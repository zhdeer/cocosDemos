{"version":3,"sources":["assets\\Script\\panel\\RankingListView.js"],"names":["GameConfig","require","AnimLayerTool","GameTools","GameUiTools","cc","Class","Component","properties","backButton","Node","rankingScrollView","Sprite","shareTicket","onLoad","start","setButtonClickEvents","shareNode","addComponent","Label","string","setPosition","node","addChild","CC_WECHATGAME","window","sharedCanvas","undefined","tex","Texture2D","width","height","wx","postMessage","messageType","MAIN_MENU_NUM","gameTypeNode","log","shareButtonFunc","event","playSimpleAudioEngine","setTimeout","sharePicture","backButtonFunc","destroy","_updateSubDomainCanvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","update"],"mappings":"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","sourceRoot":"/","sourcesContent":["var GameConfig = require(\"GameConfig\");\nvar AnimLayerTool = require(\"AnimLayerTool\");\nvar GameTools = require(\"GameTools\");\nvar GameUiTools = require(\"GameUiTools\");\ncc.Class({\n    extends: cc.Component,\n    // name: \"RankingListView\",\n    properties: {\n        backButton: cc.Node,\n        // shareButton: cc.Node,\n        rankingScrollView: cc.Sprite,//显示排行榜\n        shareTicket: null,\n    },\n    onLoad() {\n    },\n    start() {\n        GameUiTools.setButtonClickEvents(this, this.backButton, \"backButtonFunc\");\n        // GameUiTools.setButtonClickEvents(this, this.shareButton, \"shareButtonFunc\");\n        if (this.shareTicket != null) {\n            let shareNode = new cc.Node();\n            shareNode.addComponent(cc.Label).string = \"群排行\";\n            shareNode.setPosition(-260, 503);\n            this.node.addChild(shareNode);\n        }\n        if (CC_WECHATGAME) {\n            if (window.sharedCanvas != undefined) {\n                this.tex = new cc.Texture2D();\n                window.sharedCanvas.width = 720;\n                window.sharedCanvas.height = 1280;\n                // 发消息给子域\n                if (this.shareTicket != null) {\n                    window.wx.postMessage({\n                        messageType: 5,\n                        MAIN_MENU_NUM: GameConfig.MAIN_MENU_NUM,\n                        shareTicket: this.shareTicket\n                    });\n                } else {\n                    window.wx.postMessage({\n                        messageType: 1,\n                        MAIN_MENU_NUM: GameConfig.MAIN_MENU_NUM,\n                    });\n                }\n            }\n        } else {\n            let gameTypeNode = new cc.Node();\n            gameTypeNode.addComponent(cc.Label).string = \"暂无排行榜数据\";\n            this.node.addChild(gameTypeNode);\n            cc.log(\"获取排行榜数据。\" + GameConfig.MAIN_MENU_NUM);\n        }\n    },\n\n    shareButtonFunc: function (event) {\n        GameTools.playSimpleAudioEngine(4);\n        setTimeout(() => {\n            GameTools.sharePicture(\"shareTicket\");\n        }, 100);\n    },\n\n    backButtonFunc: function (event) {\n        GameTools.playSimpleAudioEngine(0);\n        this.node.destroy();\n    },\n\n    // 刷新子域的纹理\n    _updateSubDomainCanvas() {\n        if (CC_WECHATGAME) {\n            if (window.sharedCanvas != undefined) {\n                this.tex.initWithElement(window.sharedCanvas);\n                this.tex.handleLoadedTexture();\n                this.rankingScrollView.spriteFrame = new cc.SpriteFrame(this.tex);\n            }\n        }\n    },\n    update() {\n        this._updateSubDomainCanvas();\n    },\n});\n"]}