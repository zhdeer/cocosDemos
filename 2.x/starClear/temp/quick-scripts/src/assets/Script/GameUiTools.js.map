{"version":3,"sources":["assets\\Script\\GameUiTools.js"],"names":["GameConfig","require","GameTools","GameUiTools","getSpriteFrame","spriteName","curSp","cc","loader","loadRes","SpriteFrame","err","spriteFrame","error","message","console","log","newSprite","isCache","sprite","Node","split","addComponent","Sprite","love2048FrameCache","setNodeSpriteFrame","node","getComponent","setButtonClickEvents","component","menu","handler","customEventData","isScale","arrayMenu","Array","length","undefined","i","clickEventHandler","Component","EventHandler","target","name","button","Button","clickEvents","push","transition","Transition","SCALE","duration","zoomScale","setSecondSetMenuSpriteFram","secondSetMenu","isRight","getChildren","addCloseSprite","menuClose","addChild","scheduleOnce","callFunc","delay","runAction","sequence","delayTime","loadingScene","sceneName","isShowLayer","prefab","instantiate","director","getScene","children","preloadScene","loadScene","loadingLayer","panelName","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var GameConfig = require(\"GameConfig\");\nvar GameTools = require(\"GameTools\");\nvar GameUiTools = {\n    getSpriteFrame: function (spriteName, curSp) {\n        // return new cc.SpriteFrame(cc.url.raw(spriteName));\n        cc.loader.loadRes(spriteName, cc.SpriteFrame, function (err, spriteFrame) {\n            if (err) {\n            cc.error(err.message || err);\n            console.log(\"DEBUG: err\"+err);\n            return;\n            }\n            if(curSp){\n                curSp.spriteFrame =  spriteFrame;\n            }   \n            });\n    },\n    newSprite: function (spriteName, isCache) {\n        let sprite = new cc.Node();\n        if (isCache) {\n            spriteName = spriteName.split('.')[0];\n            sprite.addComponent(cc.Sprite).spriteFrame = GameTools.love2048FrameCache.getSpriteFrame(spriteName);\n        } else {\n            sprite.addComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(\"res/raw-assets/\" + spriteName);\n        }\n        return sprite;\n    },\n    setNodeSpriteFrame: function (node, spriteName) {\n        node.getComponent(cc.Sprite).spriteFrame = GameTools.love2048FrameCache.getSpriteFrame(spriteName);\n    },\n    setButtonClickEvents: function (component, menu, handler, customEventData, isScale) {\n        let arrayMenu = new Array();\n        if (menu.length == undefined) {\n            arrayMenu[0] = menu;\n\n        } else {\n            arrayMenu = menu;\n        }\n        for (let i = 0; i < arrayMenu.length; i++) {\n            let clickEventHandler = new cc.Component.EventHandler();\n            clickEventHandler.target = component.node; //这个 node 节点是你的事件处理代码组件所属的节点\n            clickEventHandler.component = component.node.name;//这个是代码文件名\n            clickEventHandler.handler = handler;\n            if (menu.length == undefined) {\n                clickEventHandler.customEventData = customEventData;\n            } else {\n                clickEventHandler.customEventData = i;\n            }\n            let button = arrayMenu[i].addComponent(cc.Button);\n            button.clickEvents.push(clickEventHandler);\n            if (isScale == undefined || isScale) {\n                button.transition = cc.Button.Transition.SCALE;\n                button.duration = 0.1;\n                button.zoomScale = 1.2;\n            }\n            // this.secondSetMenu[i].on('click', this.setMenuTouchFunc, this);\n        }\n    },\n    setSecondSetMenuSpriteFram: function (secondSetMenu, isRight) {//设置是否勾选图片\n        secondSetMenu.getChildren()[0].getComponent(cc.Sprite).spriteFrame = GameTools.love2048FrameCache.getSpriteFrame(isRight ? \"menuRight\" : \"menuClose\");\n    },\n    addCloseSprite: function (node) {\n        let menuClose = new cc.Node();\n        menuClose.addComponent(cc.Sprite).spriteFrame = GameTools.love2048FrameCache.getSpriteFrame(\"menuClose\");\n        node.addChild(menuClose);\n    },\n    scheduleOnce: function (node, callFunc, delay) {//事件调度\n        node.runAction(cc.sequence(cc.delayTime(delay), cc.callFunc(callFunc, node)));\n    },\n    loadingScene(sceneName, isShowLayer) {//加载场景\n        if (isShowLayer) {\n            cc.loader.loadRes(\"panel/LoadingLayer\", (err, prefab) => {\n                var node = cc.instantiate(prefab);\n                cc.director.getScene().children[0].addChild(node);\n                cc.director.preloadScene(sceneName, () => {\n                    cc.director.loadScene(sceneName);\n                });\n            });\n        } else {\n            cc.director.preloadScene(sceneName, () => {\n                cc.director.loadScene(sceneName);\n            });\n        }\n    },\n    loadingLayer(panelName) {//加载图层\n        cc.loader.loadRes(panelName, (err, prefab) => {\n            if (!err) {\n                let node = cc.instantiate(prefab);\n                cc.director.getScene().children[0].addChild(node);\n            }\n        });\n    },\n};\nmodule.exports = GameUiTools;"]}