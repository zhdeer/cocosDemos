
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/GameTools.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '415acQw6oNBeo2WRVLPUaoS', 'GameTools');
// Script/GameTools.js

"use strict";

var GameConfig = require("GameConfig");

var GameTools = {
  love2048FrameCache: null,
  numberLabelAtlas: null,
  backMusicIsPlay: null,
  playSimpleAudioEngine: function playSimpleAudioEngine(engineType) {
    if (GameConfig.IS_GAME_MUSIC) {
      switch (engineType) {
        case 0:
          cc.audioEngine.play(cc.url.raw('resources/sounds/pop_star.mp3'), false, 0.5);
          break;

        case 1:
          cc.audioEngine.play(cc.url.raw('resources/sounds/select.mp3'), false, 0.5);
          break;

        case 2:
          cc.audioEngine.play(cc.url.raw("resources/sounds/landing.mp3"), false, 0.5);
          break;

        case 3:
          cc.audioEngine.play(cc.url.raw("resources/sounds/cheers.mp3"), false, 0.5);
          break;

        default:
          break;
      }
    }
  },
  playBackgroundMusic: function playBackgroundMusic() {
    if (GameConfig.IS_GAME_MUSIC) {
      if (GameTools.backMusicIsPlay == null) {
        GameTools.backMusicIsPlay = cc.audioEngine.play(cc.url.raw('resources/sounds/backMusic.mp3'), true, 0.5);
      }
    }
  },
  stopBackgroundMusic: function stopBackgroundMusic() {
    if (GameTools.backMusicIsPlay != null) {
      cc.audioEngine.stop(GameTools.backMusicIsPlay);
      GameTools.backMusicIsPlay = null;
    }
  },
  getItemByLocalStorage: function getItemByLocalStorage(key, value) {
    var values = cc.sys.localStorage.getItem(key);

    if (values === undefined || values === null || values === '') {
      cc.sys.localStorage.setItem(key, value);
      return value;
    }

    if (typeof value === 'boolean') {
      if (typeof values === 'boolean') {
        return values;
      }

      return "true" == values;
    } else if (typeof value === 'number') {
      return Number(values);
    }

    return values;
  },
  setItemByLocalStorage: function setItemByLocalStorage(key, value) {
    cc.sys.localStorage.setItem(key, value);
  },
  toastMessage: function toastMessage(toastType) {
    cc.loader.loadRes("panel/ShowMessage", function (err, prefab) {
      if (!err) {
        var node = cc.instantiate(prefab);
        node.getComponent(cc.Component).toastType = toastType;
        cc.director.getScene().children[0].addChild(node); // cc.director.getScene().getChildByName('Canvas').addChild(node);
      }
    });
  },
  sharePicture: function sharePicture(pictureName) {
    var titleStr = '来跟我一起挑战浪漫2048吧。';

    if ("shareTicket" == pictureName) {
      titleStr = "看看你在群里排第几？来和我挑战浪漫2048吧。";
    } else if ("LotteryLayer" == pictureName) {
      //抽奖页面分享
      titleStr = "浪漫2048福利大放送！快进来抽奖吧！";
    } else if (pictureName != undefined && pictureName != null) {
      titleStr = "我得了" + pictureName + "分," + titleStr;
    }

    if (CC_WECHATGAME) {
      window.wx.shareAppMessage({
        title: titleStr,
        query: "x=" + GameConfig.MAIN_MENU_NUM,
        imageUrl: canvas.toTempFilePathSync({
          destWidth: 500,
          destHeight: 400
        }),
        success: function success(res) {
          if (res.shareTickets != undefined && res.shareTickets.length > 0) {
            if ("shareTicket" == pictureName) {
              window.wx.postMessage({
                messageType: 5,
                MAIN_MENU_NUM: GameConfig.MAIN_MENU_NUM == -1000 ? 1 : GameConfig.MAIN_MENU_NUM,
                shareTicket: res.shareTickets[0]
              });
            }
          }
        }
      });
    } else {
      cc.log("执行了截图" + titleStr);
    }
  },
  getGameIntegral: function getGameIntegral() {
    //获取积分
    return this.getItemByLocalStorage("GameIntegral", 0);
  },
  setGameIntegral: function setGameIntegral(intrgral) {
    // 设置积分
    cc.sys.localStorage.setItem("GameIntegral", intrgral);
  },
  commentGame: function commentGame() {
    //评论
    if (CC_WECHATGAME) {
      window.wx.openCustomerServiceConversation({});
    } else {
      this.toastMessage(1);
      cc.log("执行了评论");
    }
  },
  checkFirstLoginGame: function checkFirstLoginGame() {
    var _this = this;

    //检查是否首次登录
    var loginDate = Math.floor((new Date().getTime() - new Date(2018, 3, 18, 0, 0, 0, 0).getTime()) / (1000 * 60 * 60 * 24));

    if (loginDate > this.getItemByLocalStorage("FirstEnterGameDate", 0)) {
      cc.sys.localStorage.setItem("FirstEnterGameDate", loginDate);
      setTimeout(function () {
        _this.setGameIntegral(_this.getGameIntegral() + 100);

        _this.toastMessage(9);
      }, 1500);
    }
  },
  setCardBackPath: function setCardBackPath(num) //设置卡片背景路径
  {//GameConfig.setCardBackPath(num, "card/nl2048.png");
  },
  userLogin: function userLogin() {//用户登录
  },
  getRankData: function getRankData(shareTicket) {
    //获取排行榜
    cc.loader.loadRes("panel/RankingListView", function (err, prefab) {
      if (!err) {
        var node = cc.instantiate(prefab);

        if (shareTicket != undefined) {
          node.getComponent(cc.Component).shareTicket = shareTicket;
        } // node.setPosition(cc.p(0, 0));


        cc.director.getScene().children[0].addChild(node);
      }
    });
  },
  removeRankData: function removeRankData() {
    //移除排行榜数据
    if (CC_WECHATGAME) {
      window.wx.postMessage({
        messageType: 0
      });
    } else {
      cc.log("移除排行榜数据。");
    }
  },
  submitScore: function submitScore(score) {
    //提交得分
    if (CC_WECHATGAME) {
      window.wx.postMessage({
        messageType: 3,
        MAIN_MENU_NUM: GameConfig.MAIN_MENU_NUM,
        score: score
      });
    } else {
      cc.log("提交得分:" + GameConfig.MAIN_MENU_NUM + " : " + score);
    }
  },
  getSelectAddNum: function getSelectAddNum(num) //获取叠加数
  {
    if (num < 4) {
      num = 2;
    } else if (num < 8) {
      num = 4;
    } else if (num < 16) {
      num = 8;
    } else if (num < 32) {
      num = 16;
    } else if (num < 64) {
      num = 32;
    } else if (num < 128) {
      num = 64;
    } else if (num < 256) {
      num = 128;
    } else if (num < 512) {
      num = 256;
    } else if (num < 1024) {
      num = 512;
    } else if (num < 2048) {
      num = 1024;
    } else if (num < 4096) {
      num = 2048;
    } else if (num < 8192) {
      num = 4096;
    } else if (num < 16384) {
      num = 8192;
    } else if (num < 32768) {
      num = 16384;
    } else if (num < 65536) {
      num = 32768;
    } else if (num < 131072) {
      num = 65536;
    } else {
      num = 131072;
    }

    return num;
  }
};
module.exports = GameTools;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxHYW1lVG9vbHMuanMiXSwibmFtZXMiOlsiR2FtZUNvbmZpZyIsInJlcXVpcmUiLCJHYW1lVG9vbHMiLCJsb3ZlMjA0OEZyYW1lQ2FjaGUiLCJudW1iZXJMYWJlbEF0bGFzIiwiYmFja011c2ljSXNQbGF5IiwicGxheVNpbXBsZUF1ZGlvRW5naW5lIiwiZW5naW5lVHlwZSIsIklTX0dBTUVfTVVTSUMiLCJjYyIsImF1ZGlvRW5naW5lIiwicGxheSIsInVybCIsInJhdyIsInBsYXlCYWNrZ3JvdW5kTXVzaWMiLCJzdG9wQmFja2dyb3VuZE11c2ljIiwic3RvcCIsImdldEl0ZW1CeUxvY2FsU3RvcmFnZSIsImtleSIsInZhbHVlIiwidmFsdWVzIiwic3lzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInVuZGVmaW5lZCIsInNldEl0ZW0iLCJOdW1iZXIiLCJzZXRJdGVtQnlMb2NhbFN0b3JhZ2UiLCJ0b2FzdE1lc3NhZ2UiLCJ0b2FzdFR5cGUiLCJsb2FkZXIiLCJsb2FkUmVzIiwiZXJyIiwicHJlZmFiIiwibm9kZSIsImluc3RhbnRpYXRlIiwiZ2V0Q29tcG9uZW50IiwiQ29tcG9uZW50IiwiZGlyZWN0b3IiLCJnZXRTY2VuZSIsImNoaWxkcmVuIiwiYWRkQ2hpbGQiLCJzaGFyZVBpY3R1cmUiLCJwaWN0dXJlTmFtZSIsInRpdGxlU3RyIiwiQ0NfV0VDSEFUR0FNRSIsIndpbmRvdyIsInd4Iiwic2hhcmVBcHBNZXNzYWdlIiwidGl0bGUiLCJxdWVyeSIsIk1BSU5fTUVOVV9OVU0iLCJpbWFnZVVybCIsImNhbnZhcyIsInRvVGVtcEZpbGVQYXRoU3luYyIsImRlc3RXaWR0aCIsImRlc3RIZWlnaHQiLCJzdWNjZXNzIiwicmVzIiwic2hhcmVUaWNrZXRzIiwibGVuZ3RoIiwicG9zdE1lc3NhZ2UiLCJtZXNzYWdlVHlwZSIsInNoYXJlVGlja2V0IiwibG9nIiwiZ2V0R2FtZUludGVncmFsIiwic2V0R2FtZUludGVncmFsIiwiaW50cmdyYWwiLCJjb21tZW50R2FtZSIsIm9wZW5DdXN0b21lclNlcnZpY2VDb252ZXJzYXRpb24iLCJjaGVja0ZpcnN0TG9naW5HYW1lIiwibG9naW5EYXRlIiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsImdldFRpbWUiLCJzZXRUaW1lb3V0Iiwic2V0Q2FyZEJhY2tQYXRoIiwibnVtIiwidXNlckxvZ2luIiwiZ2V0UmFua0RhdGEiLCJyZW1vdmVSYW5rRGF0YSIsInN1Ym1pdFNjb3JlIiwic2NvcmUiLCJnZXRTZWxlY3RBZGROdW0iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLFVBQVUsR0FBR0MsT0FBTyxDQUFDLFlBQUQsQ0FBeEI7O0FBQ0EsSUFBSUMsU0FBUyxHQUFHO0VBQ1pDLGtCQUFrQixFQUFFLElBRFI7RUFFWkMsZ0JBQWdCLEVBQUUsSUFGTjtFQUdaQyxlQUFlLEVBQUUsSUFITDtFQUlaQyxxQkFBcUIsRUFBRSwrQkFBVUMsVUFBVixFQUFzQjtJQUN6QyxJQUFJUCxVQUFVLENBQUNRLGFBQWYsRUFBOEI7TUFDMUIsUUFBUUQsVUFBUjtRQUNJLEtBQUssQ0FBTDtVQUNJRSxFQUFFLENBQUNDLFdBQUgsQ0FBZUMsSUFBZixDQUFvQkYsRUFBRSxDQUFDRyxHQUFILENBQU9DLEdBQVAsQ0FBVywrQkFBWCxDQUFwQixFQUFpRSxLQUFqRSxFQUF3RSxHQUF4RTtVQUNBOztRQUNKLEtBQUssQ0FBTDtVQUNJSixFQUFFLENBQUNDLFdBQUgsQ0FBZUMsSUFBZixDQUFvQkYsRUFBRSxDQUFDRyxHQUFILENBQU9DLEdBQVAsQ0FBVyw2QkFBWCxDQUFwQixFQUErRCxLQUEvRCxFQUFzRSxHQUF0RTtVQUNBOztRQUNKLEtBQUssQ0FBTDtVQUNJSixFQUFFLENBQUNDLFdBQUgsQ0FBZUMsSUFBZixDQUFvQkYsRUFBRSxDQUFDRyxHQUFILENBQU9DLEdBQVAsQ0FBVyw4QkFBWCxDQUFwQixFQUFnRSxLQUFoRSxFQUF1RSxHQUF2RTtVQUNBOztRQUNK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Q0gsQ0FGTSxNQUVBLElBQUlBLEdBQUcsR0FBRyxJQUFWLEVBQWdCO01BQ25CQSxHQUFHLEdBQUcsSUFBTjtJQUNILENBRk0sTUFFQSxJQUFJQSxHQUFHLEdBQUcsS0FBVixFQUFpQjtNQUNwQkEsR0FBRyxHQUFHLElBQU47SUFDSCxDQUZNLE1BRUEsSUFBSUEsR0FBRyxHQUFHLEtBQVYsRUFBaUI7TUFDcEJBLEdBQUcsR0FBRyxLQUFOO0lBQ0gsQ0FGTSxNQUVBLElBQUlBLEdBQUcsR0FBRyxLQUFWLEVBQWlCO01BQ3BCQSxHQUFHLEdBQUcsS0FBTjtJQUNILENBRk0sTUFFQSxJQUFJQSxHQUFHLEdBQUcsTUFBVixFQUFrQjtNQUNyQkEsR0FBRyxHQUFHLEtBQU47SUFDSCxDQUZNLE1BRUE7TUFDSEEsR0FBRyxHQUFHLE1BQU47SUFDSDs7SUFDRCxPQUFPQSxHQUFQO0VBQ0g7QUEzTVcsQ0FBaEI7QUE4TUFPLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnBGLFNBQWpCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgR2FtZUNvbmZpZyA9IHJlcXVpcmUoXCJHYW1lQ29uZmlnXCIpO1xudmFyIEdhbWVUb29scyA9IHtcbiAgICBsb3ZlMjA0OEZyYW1lQ2FjaGU6IG51bGwsXG4gICAgbnVtYmVyTGFiZWxBdGxhczogbnVsbCxcbiAgICBiYWNrTXVzaWNJc1BsYXk6IG51bGwsXG4gICAgcGxheVNpbXBsZUF1ZGlvRW5naW5lOiBmdW5jdGlvbiAoZW5naW5lVHlwZSkge1xuICAgICAgICBpZiAoR2FtZUNvbmZpZy5JU19HQU1FX01VU0lDKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGVuZ2luZVR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnBsYXkoY2MudXJsLnJhdygncmVzb3VyY2VzL3NvdW5kcy9wb3Bfc3Rhci5tcDMnKSwgZmFsc2UsIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheShjYy51cmwucmF3KCdyZXNvdXJjZXMvc291bmRzL3NlbGVjdC5tcDMnKSwgZmFsc2UsIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheShjYy51cmwucmF3KFwicmVzb3VyY2VzL3NvdW5kcy9sYW5kaW5nLm1wM1wiKSwgZmFsc2UsIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheShjYy51cmwucmF3KFwicmVzb3VyY2VzL3NvdW5kcy9jaGVlcnMubXAzXCIpLCBmYWxzZSwgMC41KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHBsYXlCYWNrZ3JvdW5kTXVzaWM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKEdhbWVDb25maWcuSVNfR0FNRV9NVVNJQykge1xuICAgICAgICAgICAgaWYgKEdhbWVUb29scy5iYWNrTXVzaWNJc1BsYXkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEdhbWVUb29scy5iYWNrTXVzaWNJc1BsYXkgPSBjYy5hdWRpb0VuZ2luZS5wbGF5KGNjLnVybC5yYXcoJ3Jlc291cmNlcy9zb3VuZHMvYmFja011c2ljLm1wMycpLCB0cnVlLCAwLjUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBzdG9wQmFja2dyb3VuZE11c2ljOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChHYW1lVG9vbHMuYmFja011c2ljSXNQbGF5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnN0b3AoR2FtZVRvb2xzLmJhY2tNdXNpY0lzUGxheSk7XG4gICAgICAgICAgICBHYW1lVG9vbHMuYmFja011c2ljSXNQbGF5ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0SXRlbUJ5TG9jYWxTdG9yYWdlOiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBsZXQgdmFsdWVzID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgIGlmICh2YWx1ZXMgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZXMgPT09IG51bGwgfHwgdmFsdWVzID09PSAnJykge1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZXMgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJ0cnVlXCIgPT0gdmFsdWVzO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH0sXG4gICAgc2V0SXRlbUJ5TG9jYWxTdG9yYWdlOiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgfSxcbiAgICB0b2FzdE1lc3NhZ2UodG9hc3RUeXBlKSB7XG4gICAgICAgIGNjLmxvYWRlci5sb2FkUmVzKFwicGFuZWwvU2hvd01lc3NhZ2VcIiwgKGVyciwgcHJlZmFiKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcbiAgICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudChjYy5Db21wb25lbnQpLnRvYXN0VHlwZSA9IHRvYXN0VHlwZTtcbiAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpLmNoaWxkcmVuWzBdLmFkZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgIC8vIGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuZ2V0Q2hpbGRCeU5hbWUoJ0NhbnZhcycpLmFkZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLCBzaGFyZVBpY3R1cmUocGljdHVyZU5hbWUpIHtcbiAgICAgICAgbGV0IHRpdGxlU3RyID0gJ+adpei3n+aIkeS4gOi1t+aMkeaImOa1qua8qzIwNDjlkKfjgIInO1xuICAgICAgICBpZiAoXCJzaGFyZVRpY2tldFwiID09IHBpY3R1cmVOYW1lKSB7XG4gICAgICAgICAgICB0aXRsZVN0ciA9IFwi55yL55yL5L2g5Zyo576k6YeM5o6S56ys5Yeg77yf5p2l5ZKM5oiR5oyR5oiY5rWq5ryrMjA0OOWQp+OAglwiO1xuICAgICAgICB9IGVsc2UgaWYgKFwiTG90dGVyeUxheWVyXCIgPT0gcGljdHVyZU5hbWUpIHsvL+aKveWllumhtemdouWIhuS6q1xuICAgICAgICAgICAgdGl0bGVTdHIgPSBcIua1qua8qzIwNDjnpo/liKnlpKfmlL7pgIHvvIHlv6vov5vmnaXmir3lpZblkKfvvIFcIjtcbiAgICAgICAgfSBlbHNlIGlmIChwaWN0dXJlTmFtZSAhPSB1bmRlZmluZWQgJiYgcGljdHVyZU5hbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGl0bGVTdHIgPSBcIuaIkeW+l+S6hlwiICsgcGljdHVyZU5hbWUgKyBcIuWIhixcIiArIHRpdGxlU3RyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChDQ19XRUNIQVRHQU1FKSB7XG4gICAgICAgICAgICB3aW5kb3cud3guc2hhcmVBcHBNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVTdHIsXG4gICAgICAgICAgICAgICAgcXVlcnk6IFwieD1cIiArIEdhbWVDb25maWcuTUFJTl9NRU5VX05VTSxcbiAgICAgICAgICAgICAgICBpbWFnZVVybDogY2FudmFzLnRvVGVtcEZpbGVQYXRoU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRlc3RXaWR0aDogNTAwLFxuICAgICAgICAgICAgICAgICAgICBkZXN0SGVpZ2h0OiA0MDBcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc2hhcmVUaWNrZXRzICE9IHVuZGVmaW5lZCAmJiByZXMuc2hhcmVUaWNrZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInNoYXJlVGlja2V0XCIgPT0gcGljdHVyZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cud3gucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTUFJTl9NRU5VX05VTTogR2FtZUNvbmZpZy5NQUlOX01FTlVfTlVNID09IC0xMDAwID8gMSA6IEdhbWVDb25maWcuTUFJTl9NRU5VX05VTSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVUaWNrZXQ6IHJlcy5zaGFyZVRpY2tldHNbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2MubG9nKFwi5omn6KGM5LqG5oiq5Zu+XCIgKyB0aXRsZVN0cik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldEdhbWVJbnRlZ3JhbCgpIHsgLy/ojrflj5bnp6/liIZcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SXRlbUJ5TG9jYWxTdG9yYWdlKFwiR2FtZUludGVncmFsXCIsIDApO1xuICAgIH0sXG4gICAgc2V0R2FtZUludGVncmFsKGludHJncmFsKSB7IC8vIOiuvue9ruenr+WIhlxuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJHYW1lSW50ZWdyYWxcIiwgaW50cmdyYWwpO1xuICAgIH1cbiAgICAsIGNvbW1lbnRHYW1lKCkgeyAvL+ivhOiuulxuICAgICAgICBpZiAoQ0NfV0VDSEFUR0FNRSkge1xuICAgICAgICAgICAgd2luZG93Lnd4Lm9wZW5DdXN0b21lclNlcnZpY2VDb252ZXJzYXRpb24oe30pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoMSk7XG4gICAgICAgICAgICBjYy5sb2coXCLmiafooYzkuobor4TorrpcIilcbiAgICAgICAgfVxuICAgIH1cbiAgICAsIGNoZWNrRmlyc3RMb2dpbkdhbWUoKSB7IC8v5qOA5p+l5piv5ZCm6aaW5qyh55m75b2VXG4gICAgICAgIGxldCBsb2dpbkRhdGUgPSBNYXRoLmZsb29yKChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIG5ldyBEYXRlKDIwMTgsIDMsIDE4LCAwLCAwLCAwLCAwKS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICAgICAgaWYgKGxvZ2luRGF0ZSA+IHRoaXMuZ2V0SXRlbUJ5TG9jYWxTdG9yYWdlKFwiRmlyc3RFbnRlckdhbWVEYXRlXCIsIDApKSB7XG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJGaXJzdEVudGVyR2FtZURhdGVcIiwgbG9naW5EYXRlKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0R2FtZUludGVncmFsKHRoaXMuZ2V0R2FtZUludGVncmFsKCkgKyAxMDApO1xuICAgICAgICAgICAgICAgIHRoaXMudG9hc3RNZXNzYWdlKDkpO1xuICAgICAgICAgICAgfSwgMTUwMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAsIHNldENhcmRCYWNrUGF0aChudW0pLy/orr7nva7ljaHniYfog4zmma/ot6/lvoRcbiAgICB7XG4gICAgICAgIC8vR2FtZUNvbmZpZy5zZXRDYXJkQmFja1BhdGgobnVtLCBcImNhcmQvbmwyMDQ4LnBuZ1wiKTtcbiAgICB9XG5cbiAgICAsIHVzZXJMb2dpbigpIHsgLy/nlKjmiLfnmbvlvZVcbiAgICB9XG5cbiAgICAsIGdldFJhbmtEYXRhKHNoYXJlVGlja2V0KSB7IC8v6I635Y+W5o6S6KGM5qacXG4gICAgICAgIGNjLmxvYWRlci5sb2FkUmVzKFwicGFuZWwvUmFua2luZ0xpc3RWaWV3XCIsIChlcnIsIHByZWZhYikgPT4ge1xuICAgICAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XG4gICAgICAgICAgICAgICAgaWYgKHNoYXJlVGlja2V0ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudChjYy5Db21wb25lbnQpLnNoYXJlVGlja2V0ID0gc2hhcmVUaWNrZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG5vZGUuc2V0UG9zaXRpb24oY2MucCgwLCAwKSk7XG4gICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5jaGlsZHJlblswXS5hZGRDaGlsZChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgICwgcmVtb3ZlUmFua0RhdGEoKSB7Ly/np7vpmaTmjpLooYzmppzmlbDmja5cbiAgICAgICAgaWYgKENDX1dFQ0hBVEdBTUUpIHtcbiAgICAgICAgICAgIHdpbmRvdy53eC5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNjLmxvZyhcIuenu+mZpOaOkuihjOamnOaVsOaNruOAglwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAsIHN1Ym1pdFNjb3JlKHNjb3JlKSB7IC8v5o+Q5Lqk5b6X5YiGXG4gICAgICAgIGlmIChDQ19XRUNIQVRHQU1FKSB7XG4gICAgICAgICAgICB3aW5kb3cud3gucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiAzLFxuICAgICAgICAgICAgICAgIE1BSU5fTUVOVV9OVU06IEdhbWVDb25maWcuTUFJTl9NRU5VX05VTSxcbiAgICAgICAgICAgICAgICBzY29yZTogc2NvcmUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNjLmxvZyhcIuaPkOS6pOW+l+WIhjpcIiArIEdhbWVDb25maWcuTUFJTl9NRU5VX05VTSArIFwiIDogXCIgKyBzY29yZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgICwgZ2V0U2VsZWN0QWRkTnVtKG51bSkgLy/ojrflj5blj6DliqDmlbBcbiAgICB7XG4gICAgICAgIGlmIChudW0gPCA0KSB7XG4gICAgICAgICAgICBudW0gPSAyO1xuICAgICAgICB9IGVsc2UgaWYgKG51bSA8IDgpIHtcbiAgICAgICAgICAgIG51bSA9IDQ7XG4gICAgICAgIH0gZWxzZSBpZiAobnVtIDwgMTYpIHtcbiAgICAgICAgICAgIG51bSA9IDg7XG4gICAgICAgIH0gZWxzZSBpZiAobnVtIDwgMzIpIHtcbiAgICAgICAgICAgIG51bSA9IDE2O1xuICAgICAgICB9IGVsc2UgaWYgKG51bSA8IDY0KSB7XG4gICAgICAgICAgICBudW0gPSAzMjtcbiAgICAgICAgfSBlbHNlIGlmIChudW0gPCAxMjgpIHtcbiAgICAgICAgICAgIG51bSA9IDY0O1xuICAgICAgICB9IGVsc2UgaWYgKG51bSA8IDI1Nikge1xuICAgICAgICAgICAgbnVtID0gMTI4O1xuICAgICAgICB9IGVsc2UgaWYgKG51bSA8IDUxMikge1xuICAgICAgICAgICAgbnVtID0gMjU2O1xuICAgICAgICB9IGVsc2UgaWYgKG51bSA8IDEwMjQpIHtcbiAgICAgICAgICAgIG51bSA9IDUxMjtcbiAgICAgICAgfSBlbHNlIGlmIChudW0gPCAyMDQ4KSB7XG4gICAgICAgICAgICBudW0gPSAxMDI0O1xuICAgICAgICB9IGVsc2UgaWYgKG51bSA8IDQwOTYpIHtcbiAgICAgICAgICAgIG51bSA9IDIwNDg7XG4gICAgICAgIH0gZWxzZSBpZiAobnVtIDwgODE5Mikge1xuICAgICAgICAgICAgbnVtID0gNDA5NjtcbiAgICAgICAgfSBlbHNlIGlmIChudW0gPCAxNjM4NCkge1xuICAgICAgICAgICAgbnVtID0gODE5MjtcbiAgICAgICAgfSBlbHNlIGlmIChudW0gPCAzMjc2OCkge1xuICAgICAgICAgICAgbnVtID0gMTYzODQ7XG4gICAgICAgIH0gZWxzZSBpZiAobnVtIDwgNjU1MzYpIHtcbiAgICAgICAgICAgIG51bSA9IDMyNzY4O1xuICAgICAgICB9IGVsc2UgaWYgKG51bSA8IDEzMTA3Mikge1xuICAgICAgICAgICAgbnVtID0gNjU1MzY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBudW0gPSAxMzEwNzI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVUb29sczsiXX0=